time="2024-05-07T12:37:10+08:00" level=info msg="init logger successful" file="init.go:55" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="current user 1000:100" file="init.go:57" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="report event InitStart success" file="event.go:95" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="init command: bash /home/ma-user/training/init.sh 's3://wolf-dl-bj4/ResNet-50/resnet/'" file="init.go:81" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="scc is already installed, skipping this step..." Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[init] toolkit_obs_upload_pid = 57" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[init] running at 2024-05-07-12:37:10" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[init] ip of the pod: 172.16.0.126" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:207" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:10+08:00" level=info msg="obs dir = s3://modelarts-training-log-cn-north-4/d468340e-7fcb-4c26-8e09-d2f458fd41a2/worker-0" file="upload.go:210" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:10+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:10+08:00" level=info msg="start the periodic upload task, upload Period = 5 seconds " file="upload.go:221" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:10+08:00" level=info msg="report event DetectStart success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[task]Detect item: disk-size cache" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[detect] code: 0, message: ok, item: disk-size cache" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:10+08:00" level=info msg="[task]Detect item: dns" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="[detect] code: 0, message: ok, item: dns" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="[task]Detect item: disk-size root" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="[detect] code: 0, message: ok, item: disk-size root" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="[task]Detect item: disk-size shm" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="[detect] code: 0, message: ok, item: disk-size shm" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:11+08:00" level=info msg="report event DetectFinish success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
cp: cannot stat '/home/ma-user/training/runtime-scripts-v2/scc': No such file or directory
time="2024-05-07T12:37:15+08:00" level=info msg="MA_OUTPUT_PRELOAD_SUFFIX: ." file="preload.go:27" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:15+08:00" level=info msg="modelarts output channel preload to memarts switch is: false." file="preload.go:40" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:15+08:00" level=info msg="[init] autosearch_path is empty, skip the autosearch download" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:15+08:00" level=info msg="report event DownloadCodeStart success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:15+08:00" level=info msg="[init] start to download the code" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:15+08:00" level=info msg="[init] code_url: s3://wolf-dl-bj4/ResNet-50/resnet/" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:15+08:00" level=info msg="[init] modelarts_downloader_job_pid = 1275" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:16+08:00" level=info msg="Main: modelarts-downloader starting with Namespace(recursive=True, skip_creating_dir=False, type='common', verbose=False, trace=False, src='s3://wolf-dl-bj4/ResNet-50/resnet/', dst='./')" Component=PythonScripts Platform=ModelArts-Service
[ModelArts Service Log]2024-05-07 12:37:16,845 - file_io.py[line:2717] - INFO: List OBS time cost: 0.08 seconds.
[ModelArts Service Log]2024-05-07 12:37:16,950 - file_io.py[line:2758] - INFO: Copy parallel total time cost: 0.18 seconds.
time="2024-05-07T12:37:17+08:00" level=info msg="[init] code is now in /home/ma-user/modelarts/user-job-dir" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="[init] download the code use 1.228s" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="report event DownloadCodeSuccess success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="[init] record_dir is empty, skip the code upload" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="[init] inputs_handler_job_pid = 1392" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="report event DownloadInputStart success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:17+08:00" level=info msg="caching the content of [data_url] inputs" Component=PythonScripts Platform=ModelArts-Service
time="2024-05-07T12:37:18+08:00" level=info msg="Main: modelarts-downloader starting with Namespace(recursive=True, skip_creating_dir=True, type='common', verbose=False, trace=False, src='s3://wolf-dl-bj4/ResNet-50/mushrooms/test/', dst='./')" Component=PythonScripts Platform=ModelArts-Service
[ModelArts Service Log]2024-05-07 12:37:18,487 - file_io.py[line:2717] - INFO: List OBS time cost: 0.07 seconds.
[ModelArts Service Log]2024-05-07 12:37:18,560 - file_io.py[line:2758] - INFO: Copy parallel total time cost: 0.15 seconds.
time="2024-05-07T12:37:18+08:00" level=info msg="cache the content of [data_url] inputs successfully" Component=PythonScripts Platform=ModelArts-Service
time="2024-05-07T12:37:18+08:00" level=info msg="it can be accessed at local dir [/home/ma-user/modelarts/inputs/data_url_0]" Component=PythonScripts Platform=ModelArts-Service
time="2024-05-07T12:37:18+08:00" level=info msg="report event DownloadInputSuccess success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="mkdir for local output dir" Component=PythonScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="output-handler finalized" Component=PythonScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="there is no need to download obs channels file" file="download_by_channels.go:27" Command=obs/download_by_channels Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="[init] exiting at 2024-05-07-12:37:19" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="[init] stop toolkit_obs_upload_pid = 57 by signal SIGTERM" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="the final upload is in progress..." file="upload.go:232" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="[init] toolkit_obs_upload 57 ret_code is 0" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="[init] exit with 0" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:207" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="obs dir = s3://modelarts-training-log-cn-north-4/d468340e-7fcb-4c26-8e09-d2f458fd41a2/worker-0" file="upload.go:210" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="MA_OUTPUT_PRELOAD_SUFFIX: ." file="preload.go:27" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="modelarts output channel preload to memarts switch is: false." file="preload.go:40" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service Task=
time="2024-05-07T12:37:19+08:00" level=info msg="report event InitExit success" file="event.go:95" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:19+08:00" level=info msg="bootstrap is exiting with exit code 0" file="bootstrap.go:306" Command=bootstrap/init Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:21+08:00" level=info msg="init logger successful" file="run_train.go:132" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:21+08:00" level=info msg="task-training container update heartbeat file started" file="heartbeat.go:97" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:21+08:00" level=info msg="the core file size limit is 5242880\n" file="core_file_collect.go:34" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:21+08:00" level=warning msg="create core file symbolic link to log path failed, skip core file collection, error: current core_pattern is |/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h %e\n, does not have /tmp/core-file prefix" file="run_train.go:139" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:21+08:00" level=info msg="Waiting for SCC server start." file="run_train.go:574" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="init logger successful" file="upload.go:77" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="start checking secret refresh time." file="secret.go:46" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="current user 1000:100" file="upload.go:85" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="report event SidecarStart success" file="event.go:95" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="obs download task in progress, local dir: /home/ma-user/training/runtime-scripts-v2/sidecar-container/, obs dir: /modelarts-training-log-cn-north-4/train-knowledge, num workers: 1" file="download.go:158" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=ma_knowledge_download
time="2024-05-07T12:37:22+08:00" level=info msg="obs download complete, successful: 0, failed: 0, skipped: 0, total downloaded bytes: 0, total elapsed time: 0s" file="download.go:195" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service Task=ma_knowledge_download
time="2024-05-07T12:37:22+08:00" level=warning msg="chmod data turbo host path /home/ma-user/training/runtime-scripts-v2/sidecar-container/diagnose_knowledge.json failed, error: chmod /home/ma-user/training/runtime-scripts-v2/sidecar-container/diagnose_knowledge.json: no such file or directory" file="upload.go:57" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="upload command: /home/ma-user/training/sidecar.sh" file="upload.go:112" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="watch periodically task-training container heartbeat file started, periodic interval：heartbeat update:60s, heartbeat check:60s, heartbeat timeout:180s" file="heartbeat.go:42" Command=bootstrap/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="scc is already installed, skipping this step..." Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] running at 2024-05-07-12:37:22" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] scc server pid = 56" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] will upload using 8 workers" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] toolkit_obs_upload_by_channels_pid = 60" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] fault diagnose starting" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="[sidecar] waiting for training complete" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=error msg="open knowledge file /home/ma-user/training/runtime-scripts-v2/sidecar-container/diagnose_knowledge.json failed: open /home/ma-user/training/runtime-scripts-v2/sidecar-container/diagnose_knowledge.json: no such file or directory" file="analyzer.go:181" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="analyzer knowledge comes from [/home/ma-user/training/runtime-scripts-v2/sidecar-container/diagnose_knowledge_default.json]" file="analyzer.go:171" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="diagnosis http server listening at 127.0.0.1:9627" file="analyzer.go:446" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="Starting SCC server on 127.0.0.1:27303" file="server.go:52" Command=scc-server Component=ma-scc-server Platform=ModelArts-Service
time="2024-05-07T12:37:22+08:00" level=info msg="local dir = /home/ma-user/modelarts/outputs/train_url_0/" file="upload.go:207" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=train_url
time="2024-05-07T12:37:22+08:00" level=info msg="obs dir = s3://wolf-dl-bj4/ResNet-50/output/" file="upload.go:210" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=train_url
time="2024-05-07T12:37:22+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=train_url
time="2024-05-07T12:37:22+08:00" level=info msg="start the periodic upload task, upload Period = 30 seconds " file="upload.go:221" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=train_url
time="2024-05-07T12:37:22+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:207" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:22+08:00" level=info msg="obs dir = s3://modelarts-training-log-cn-north-4/d468340e-7fcb-4c26-8e09-d2f458fd41a2/worker-0" file="upload.go:210" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:22+08:00" level=info msg="enable append upload mode" file="upload.go:213" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:22+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:22+08:00" level=info msg="start the periodic upload task, upload Period = 5 seconds " file="upload.go:221" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:22+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:207" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=log_url
time="2024-05-07T12:37:22+08:00" level=info msg="obs dir = obs://wolf-dl-bj4/ResNet-50/predict_log/" file="upload.go:210" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=log_url
time="2024-05-07T12:37:22+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=log_url
time="2024-05-07T12:37:22+08:00" level=info msg="start the periodic upload task, upload Period = 30 seconds " file="upload.go:221" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=log_url
time="2024-05-07T12:37:26+08:00" level=info msg="SCC server has been init, training continue." file="run_train.go:592" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="report event DetectStart success" file="event.go:95" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="SOC_VERSION environment variable is equal to Ascend910A, not empty, and needs to be unset" file="ascend_check.go:83" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="SOC_VERSION environment variable unset successfully" file="ascend_check.go:88" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="dcmi checking" file="ascend_check.go:192" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="dcmi check successful, details: driver_health_state:0, device_health_state:0, net_health_state:0" file="ascend_check.go:224" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=warning msg="ascend-dmi executor create failed, error: ascend-dmi is not found in the /usr/local/Ascend/toolbox path, skip this detect step" file="ascend_check.go:107" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:27+08:00" level=info msg="MA_OUTPUT_PRELOAD_SUFFIX: ." file="preload.go:27" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:27+08:00" level=info msg="modelarts output channel preload to memarts switch is: false." file="preload.go:40" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:37:29+08:00" level=info msg="the power of all npus is normal, [69.400000]" file="ascend_check.go:121" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="report event DetectFinish success" file="event.go:95" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="current user name: ma-user" file="image_check.go:69" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="current uid: 1000" file="image_check.go:70" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="current gid: 100" file="image_check.go:71" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="image check passed" file="image_check.go:56" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:29+08:00" level=info msg="hccn sampler routine is started, sample interval is 10s" file="sample_routine.go:97" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="starting MAOS agent metrics exporter" file="metrics_exporter.go:274" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="npu-smi sampler routine is started, sample interval is 10s" file="sample_routine.go:100" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="report event TrainingStart success" file="event.go:95" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="pre train command: mkdir -p ~/.pip; echo -e '[global]\\ntrusted-host = repo.myhuaweicloud.com\\nindex-url = http://repo.myhuaweicloud.com/repository/pypi/simple/\\ntimeout = 120' > ~/.pip/pip.conf;  bash /home/ma-user/modelarts/run/detect_hang.sh;" file="run_train.go:868" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="[task] hang-detect" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="[task] toolkit_hang_detect_pid = 116" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="pre runtime info collection started" file="run_train.go:1128" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ofed_info_output, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting cudnn_version, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting gpu_driver_version, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting cuda_version, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting gpu_topo, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ib_stats, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ascend_dmi, reason: ascend-dmi executor create failed, error: ascend-dmi is not found in the /usr/local/Ascend/toolbox path" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ib_dev_to_net_dev, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting nccl_version, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting gpu_info, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting nfs_mount_path_check, reason: MA_NFS_MOUNT_VOLUMES env is not found" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ib_driver_version_on_host, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ib_gids, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:30+08:00" level=info msg="skip collecting ethernet_qos, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:31+08:00" level=info msg="skip collecting hccn_tool, reason: empty results" file="collector.go:162" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="pre runtime info collection finished" file="run_train.go:1144" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="the pre-training script(ma-pre-start.sh or ma-pre-start.py) not found on env, bootfile dir, or code dir, skipping execution" file="run_train.go:946" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="run command: bash /home/ma-user/modelarts/run/run_train_v2.sh '/home/ma-user/modelarts/user-job-dir/resnet/resnet50_predict.py' '--checkpoint_path=s3://wolf-dl-bj4/ResNet-50/ckpt_files/resnet-90_18810.ckpt' '--data_url=/home/ma-user/modelarts/inputs/data_url_0/' '--train_url=/home/ma-user/modelarts/outputs/train_url_0/' " file="run_train.go:478" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="auto set NCCL_SOCKET_IFNAME env: NCCL_SOCKET_IFNAME=eth0" file="run_train.go:423" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="failed to read user policy config: env MA_RECOVER_POLICY not exists or empty, will get recover policy from envs" file="policy.go:594" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="runtime policy to be applied: {\"api_version\":\"0.0.1\",\"actions\":{\"ascend_log_diag_when_fail\":{\"max_num\":32767},\"ascend_log_diag_when_hang\":{\"max_num\":1},\"exit\":{\"max_num\":32767},\"npu_proc_restart\":{\"max_num\":32767,\"downgrade\":\"job_reschedule_with_taint\"}},\"exception_handle\":[{\"exception\":{\"type\":\"hanging\"},\"handle_action\":\"ascend_log_diag_when_hang\",\"priority\":0},{\"exception\":{\"type\":\"npu_reset_configmap\"},\"handle_action\":\"npu_proc_restart\",\"priority\":-100},{\"exception\":{\"type\":\"gpu_reset_configmap\"},\"handle_action\":\"gpu_proc_restart\",\"priority\":-100},{\"exception\":{\"type\":\"custom_pattern\",\"value\":\"CUDA_ERROR_ECC_UNCORRECTABLE\"},\"handle_action\":\"gpu_proc_restart\",\"priority\":-100},{\"exception\":{\"type\":\"custom_pattern\",\"value\":\"uncorrectable ECC error\"},\"handle_action\":\"gpu_proc_restart\",\"priority\":-100},{\"exception\":{\"type\":\"gpu_smi\"},\"handle_action\":\"gpu_proc_restart\",\"priority\":-100},{\"exception\":{\"type\":\"exit_code\",\"value\":\"137\"},\"handle_action\":\"pod_reschedule\",\"priority\":-100},{\"exception\":{\"type\":\"ascend_diag_result\"},\"handle_action\":\"pod_reschedule\",\"priority\":-100},{\"exception\":{\"type\":\"first_fail_term\"},\"handle_action\":\"ascend_log_diag_when_fail\",\"priority\":-100}]}" file="policy.go:608" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: listenAndServe) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="http server listening at 172.16.0.126:15465" file="server.go:62" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: checkIn) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=warning msg="[gpu driver version validator]skip collecting environment information, reason: GPUDriverVersion is empty, maybe it's not a GPU job" file="validate.go:66" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=warning msg="[firmware version validator]skip collecting environment information, reason: firmware version is empty" file="validate.go:66" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=warning msg="[ofed version validator]skip collecting environment information, reason: ofed version is empty" file="validate.go:66" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: checkIn) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event(name: CheckedInEvent, msg: ) is being handled, len: 0" file="controller.go:72" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="received check-in from task worker-0" file="handler.go:199" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="[consistency-validate] single-node job, skip the consistency validate." file="validate.go:74" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="all task worker checked-in, will start training" file="handler.go:438" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchNPUResetConfig) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchHangMetric) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: startAndWait) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="done handling event(name: CheckedInEvent, msg: ), started listeners: [startAndWait instructAllFollowersStart watchNPURecoverStatus watchNPUResetConfig watchGPUResetConfig watchHangMetric watchAgentFaultCode watchDynamicProfiling]" file="controller.go:86" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchNPURecoverStatus) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchDynamicProfiling) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: instructAllFollowersStart) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: instructAllFollowersStart) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchGPUResetConfig) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchAgentFaultCode) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=warning msg="hot reset config file watcher is empty, skip the watch step" file="listener.go:484" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchNPUResetConfig) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="add path /home/ma-user/modelarts/dynamic-profiling-config to dynamic profiling config file watcher sucessful" file="watcher.go:64" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="no agent fault code catch policy, will not listen maos node agent fault code" file="listener.go:669" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchAgentFaultCode) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="dynamic profiling config watcher is running, metric file path: /home/ma-user/modelarts/dynamic-profiling-config" file="watcher.go:73" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchGPUResetConfig) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=error msg="try to listen agent metrics failed, err: no maos-node-agent metrics file found, this feature may not be turned on for this pool, skip listening, policy related to npu recover may not work" file="listener.go:736" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="add path /home/ma-user/modelarts/log to metric file watcher sucessful" file="watcher.go:65" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="trainingProcHang metric file watcher is running, metric file path: /home/ma-user/modelarts/log" file="watcher.go:74" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:32+08:00" level=info msg="event listener(name: watchNPURecoverStatus) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="cmd env: [LD_LIBRARY_PATH=/usr/local/Ascend/driver/lib64/driver:/usr/local/Ascend/driver/lib64/driver:/usr/local/lib/:/usr/lib/aarch64-linux-gnu/hdf5/serial:/usr/local/Ascend/driver/lib64:/usr/local/Ascend/driver/lib64/common:/usr/local/Ascend/driver/lib64/driver:/usr/local/Ascend/ascend-toolkit/latest/lib64:/usr/local/Ascend/ascend-toolkit/latest/compiler/lib64/plugin/opskernel:/usr/local/Ascend/ascend-toolkit/latest/compiler/lib64/plugin/nnengine::/usr/local/seccomponent/lib/:/usr/local/seccomponent/lib/openssl/ TOOLCHAIN_HOME=/usr/local/Ascend/ascend-toolkit/latest/toolkit MA_ENGINE_VERSION=mindspore_1.7.0-cann_5.1.0-py_3.7-euler_2.8.3-aarch64 MA_NUM_HOSTS=1 VC_WORKER_HOSTS=ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-worker-0.ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2 VK_TASK_INDEX=0 MA_SCRIPT_INTERPRETER= AOM_ENDPOINT=https://aom.cn-north-4.myhuaweicloud.com MA_MAX_BACKOFF=0 HOSTNAME=ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-worker-0 PIP_OPTS=--trusted-host szg1.artifactory.inhuawei.com -i https://szg1.artifactory.inhuawei.com/artifactory/api/pypi/cbu-pypi-public/simple/ --user MA_COLLECT_CORE_FILE=1 NPU-VISIBLE-DEVICES=1 ENV_NAME=MindSpore MA_IAM_USER_ID=8fdf20f1f8c84acc99ae6ce6f91e26a7 MA_CURRENT_IP=172.16.0.126 MA_MOUNT_PATH=/home/ma-user/modelarts ASCEND_AICPU_PATH=/usr/local/Ascend/ascend-toolkit/latest MA_ENGINE_TYPE=ascend-powered-engine MODELARTS_SCC_SERVICE_PORT=27303 MA_HOME=/home/ma-user KUBERNETES_PORT_443_TCP_PROTO=tcp KUBERNETES_PORT_443_TCP_ADDR=10.247.0.1 MA_VJ_NAME=ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2 FE_FLAG=1 MA_PIP_URL=http://repo.myhuaweicloud.com/repository/pypi/simple/ MA_CODE_DIR=/home/ma-user/modelarts/user-job-dir/resnet MA_TRAINING_CONTAINER_HEARTBEAT_WATCH_IS_ON=1 MA_RUNTIME_INFO_COLLECTION=true MA_WORKING_DIR=/home/ma-user/modelarts/user-job-dir KUBERNETES_PORT=tcp://10.247.0.1:443 MA_ENABLE_GPU_RECOVER=false PWD=/home/ma-user MA_DIAG_MODE_ENV= HOME=/home/ma-user MA_CURRENT_HOST_IP=192.168.0.208 CES_ENDPOINT=https://ces.cn-north-4.myhuaweicloud.com S3_USE_HTTPS=1 MA_LOG_DIR=/home/ma-user/modelarts/log KUBERNETES_SERVICE_PORT_HTTPS=443 SITE_PACKAGES_PATH=/home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages KUBERNETES_PORT_443_TCP_PORT=443 IS_NEW_IMAGE_FRAMEWORK=true RANK_TABLE_FILE=/user/config NNAE_PATH=/usr/local/Ascend/nnae/latest MA_NUM_GPUS=1 S3_ENDPOINT=https://obs.cn-north-4.myhuaweicloud.com SCC_CONFIG_PATH=/home/ma-user/modelarts/scc/conf_10x/scc.conf SFS_ENDPOINT=https://sfs-turbo.cn-north-4.myhuaweicloud.com MA_CURRENT_INSTANCE_ID=5d1cbac0-c568-45dd-955e-0066a4eb4b3c MA_USER_LOG_DIR_OBS=/wolf-dl-bj4/ResNet-50/predict_log/ MA_SCC_PYTHON_ADAPTER=/home/ma-user/modelarts/scc MA_PIP_HOST=repo.myhuaweicloud.com MODELARTS_MODEL_PATH=/home/ma-user/infer/model/1 S3_VERIFY_SSL=0 PAAS_POD_ID=5d1cbac0-c568-45dd-955e-0066a4eb4b3c KUBERNETES_PORT_443_TCP=tcp://10.247.0.1:443 OPTION_EXEC_EXTERN_PLUGIN_PATH=/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libfe.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libaicpu_plugin.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/librts_engine.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libge_local_engine.so MA_INPUTS={\"inputs\":[{\"name\":\"data_url\",\"local_dir\":\"/home/ma-user/modelarts/inputs/data_url_0\",\"access_method\":\"parameter\",\"remote\":{\"obs\":{\"obs_url\":\"s3://wolf-dl-bj4/ResNet-50/mushrooms/test/\"}}}]}  VC_TASK_INDEX=0 PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python MODELARTS_BATCH_PREDICT_URL=http://127.0.0.1:8080 ASCEND_OPP_PATH=/usr/local/Ascend/ascend-toolkit/latest/opp MA_RUN_MODE_ENV=normal VC_WORKER_NUM=1 MA_HANG_DETECT=1 MA_IAM_PROJECT_ID=1ea4888d5155462689dc66614b29dc59 SDR_LIBRARY_PATH=/usr/local/route MA_PYTHON_VERSION=3 SHLVL=1 DEPLOY_MODE=1 ANACONDA_DIR=/home/ma-user/anaconda3 MA_TERMINATION_GRACE_PERIOD_SECONDS=60 PYTHONPATH=/usr/local/Ascend/tfplugin/latest/python/site-packages:/usr/local/Ascend/ascend-toolkit/latest/python/site-packages:/usr/local/Ascend/ascend-toolkit/latest/opp/op_impl/built-in/ai_core/tbe:/usr/local/seccomponent/lib:/home/ma-user/infer/model/1 MA_OUTPUTS={\"outputs\":[{\"name\":\"train_url\",\"local_dir\":\"/home/ma-user/modelarts/outputs/train_url_0\",\"access_method\":\"parameter\",\"remote\":{\"obs\":{\"obs_url\":\"s3://wolf-dl-bj4/ResNet-50/output/\"}},\"mode\":\"upload_periodically\",\"period\":30,\"prefetch_to_local\":false}]}  MA_DETECT_ITEM={\"ascend_check\":1,\"disk_size_check\":1,\"dns_check\":1} MA_CURRENT_INSTANCE_NAME=ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-worker-0 KUBERNETES_SERVICE_PORT=443 MA_RUNTIME_RECOVER_SYS_PORT=15465 ME_TBE_PLUGIN_PATH=/usr/local/Ascend/opp/framework/built-in/tensorflow/ CREDENTIAL_PROFILES_FILE=/run/secrets/modelarts/user/config MA_JOB_DIR=/home/ma-user/modelarts/user-job-dir MA_TERMINATION_MESSAGE_PATH=/home/ma-user/modelarts/log/termination-log PATH=/home/ma-user/anaconda/bin:/home/ma-user/anaconda/bin:/home/ma-user/anaconda3/envs/MindSpore/bin:/usr/local/Ascend/ascend-toolkit/latest/bin:/usr/local/Ascend/ascend-toolkit/latest/compiler/ccec_compiler/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/ma-user/.local/bin MA_ENABLE_ASCEND_DEVICE_LOG_EXPORT=false MA_APIGW_ENDPOINT=https://modelarts.cn-north-4.myhuaweicloud.com MA_TRAINING_MOUNT_PATH=/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2 MA_CUSTOM_METRICS_EXPORTER_MAOS_AGENT_ON=true MA_TASK_NAME=worker MA_NAMESPACE=default KUBERNETES_SERVICE_HOST=10.247.0.1 ASCEND_AUTOML_PATH=/usr/local/Ascend/ascend-toolkit/latest/tools AICPU_FLAG=1 MA_CUSTOM_METRICS_EXPORTER_ON=false MA_CONSISTENCY_VALIDATE=true _=/home/ma-user/modelarts/ma-training-toolkit MA_JOB_START_TIME=1715056650 NCCL_SOCKET_IFNAME=eth0 MA_RUNNING_CNT=1 MA_INSTRUCT_TRAINING_PROC_START_TIME=2024-05-07-12-37-32]" file="process.go:142" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="start command successfully, pid: 359, command: [bash -c bash /home/ma-user/modelarts/run/run_train_v2.sh '/home/ma-user/modelarts/user-job-dir/resnet/resnet50_predict.py' '--checkpoint_path=s3://wolf-dl-bj4/ResNet-50/ckpt_files/resnet-90_18810.ckpt' '--data_url=/home/ma-user/modelarts/inputs/data_url_0/' '--train_url=/home/ma-user/modelarts/outputs/train_url_0/' ]" file="process.go:147" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="zombie process cleaner is start running, childPid=359" file="cleaner_unix.go:31" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="user: uid=1000(ma-user) gid=100(ma-group) groups=100(ma-group),10000(HwHiAiUser)" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="pwd: /home/ma-user" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="boot_file: /home/ma-user/modelarts/user-job-dir/resnet/resnet50_predict.py" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="command: /home/ma-user/modelarts/user-job-dir/resnet/resnet50_predict.py --checkpoint_path=s3://wolf-dl-bj4/ResNet-50/ckpt_files/resnet-90_18810.ckpt --data_url=/home/ma-user/modelarts/inputs/data_url_0/ --train_url=/home/ma-user/modelarts/outputs/train_url_0/" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="local_code_dir: /home/ma-user/modelarts/user-job-dir/resnet" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:34+08:00" level=info msg="training start at 2024-05-07-12:37:34" Component=ShellScripts Platform=ModelArts-Service
[ModelArts Service Log]install modelarts training system python packages
[ModelArts Service Log]engine type is: ascend-powered-engine
[ModelArts Service Log]python version: 3
[ModelArts Service Log]package directory: /home/ma-user/modelarts/package
Looking in indexes: http://repo.myhuaweicloud.com/repository/pypi/simple/
Processing ./huawei_aiturbo_ckpt-1.0.0.post20231227145238-py3-none-any.whl
Installing collected packages: huawei-aiturbo-ckpt
Successfully installed huawei-aiturbo-ckpt-1.0.0.post20231227145238

[notice] A new release of pip available: 22.1.2 -> 24.0
[notice] To update, run: pip install --upgrade pip
Looking in indexes: http://repo.myhuaweicloud.com/repository/pypi/simple/
Processing ./moxing_framework-2.1.6.879ab2f4-py2.py3-none-any.whl
Requirement already satisfied: lxml>=4.1.0 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (4.4.2)
Requirement already satisfied: urllib3>=1.26.2 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (1.26.10)
Requirement already satisfied: certifi in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (2022.6.15)
Collecting protobuf<4,>=3.10.0
  Downloading http://repo.myhuaweicloud.com/repository/pypi/packages/2a/7c/e7091f0eea6eec70547d28c6c0d8c7335ee58f6b13456608beec8c94a62a/protobuf-3.20.3-cp37-cp37m-manylinux2014_aarch64.whl (917 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 917.9/917.9 kB 18.2 MB/s eta 0:00:00
Requirement already satisfied: setuptools in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (63.1.0)
Requirement already satisfied: psutil>=5.4.6 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (5.7.0)
Requirement already satisfied: lazy-import>=0.2.2 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (0.2.2)
Requirement already satisfied: PyYAML>=3.12 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (5.3.1)
Requirement already satisfied: scipy>=1.1.0 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (1.5.4)
Requirement already satisfied: six in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (1.16.0)
Requirement already satisfied: Pillow>=3.3.1 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (9.2.0)
Requirement already satisfied: numpy>=1.16.4 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (1.21.2)
Requirement already satisfied: pathlib2>=2.3.0 in /home/ma-user/anaconda3/envs/MindSpore/lib/python3.7/site-packages (from moxing-framework==2.1.6.879ab2f4) (2.3.7.post1)
Installing collected packages: protobuf, moxing-framework
  Attempting uninstall: protobuf
    Found existing installation: protobuf 4.21.2
    Uninstalling protobuf-4.21.2:
      Successfully uninstalled protobuf-4.21.2
  Attempting uninstall: moxing-framework
    Found existing installation: moxing-framework 2.0.1.rc0.ffd1c0c8
    Uninstalling moxing-framework-2.0.1.rc0.ffd1c0c8:
      Successfully uninstalled moxing-framework-2.0.1.rc0.ffd1c0c8
Successfully installed moxing-framework-2.1.6.879ab2f4 protobuf-3.20.3

[notice] A new release of pip available: 22.1.2 -> 24.0
[notice] To update, run: pip install --upgrade pip
no found requirements.txt, skip requirements installing.
time="2024-05-07T12:37:41+08:00" level=info msg="report event PretrainingStart success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:37:41+08:00" level=info msg="pre train script use 0.157s" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:37:41+08:00" level=info msg="report event PretrainingFinish success" file="event.go:95" Command=report Component=ma-training-toolkit Platform=ModelArts-Service
INFO:root:Using MoXing-v2.1.6.879ab2f4-879ab2f4
INFO:root:Using OBS-Python-SDK-3.20.9.1
[ModelArts Service Log]2024-05-07 12:37:42,472 - INFO - Ascend Driver: Version=22.0.0.3
[ModelArts Service Log]2024-05-07 12:37:42,472 - INFO - you are advised to use ASCEND_DEVICE_ID env instead of DEVICE_ID, as the DEVICE_ID env will be discarded in later versions
[ModelArts Service Log]2024-05-07 12:37:42,472 - INFO - particularly, ${ASCEND_DEVICE_ID} == ${DEVICE_ID}, it's the logical device id
[ModelArts Service Log]2024-05-07 12:37:42,472 - INFO - Davinci training command
[ModelArts Service Log]2024-05-07 12:37:42,472 - INFO - ['/home/ma-user/anaconda/bin/python', '/home/ma-user/modelarts/user-job-dir/resnet/resnet50_predict.py', '--checkpoint_path=s3://wolf-dl-bj4/ResNet-50/ckpt_files/resnet-90_18810.ckpt', '--data_url=/home/ma-user/modelarts/inputs/data_url_0/', '--train_url=/home/ma-user/modelarts/outputs/train_url_0/']
[ModelArts Service Log]2024-05-07 12:37:42,473 - INFO - Route plan ends for env ROUTE_PLAN = false. Route plan acceleration service may not be available in this region
[ModelArts Service Log]2024-05-07 12:37:42,473 - INFO - Wait for Rank table file ready
[ModelArts Service Log]2024-05-07 12:37:42,473 - INFO - Rank table file /user/config/jobstart_hccl.json (K8S generated) is ready for read
[ModelArts Service Log]2024-05-07 12:37:42,474 - INFO - 
{
    "status": "completed",
    "group_count": "1",
    "group_list": [
        {
            "group_name": "worker",
            "device_count": "1",
            "instance_count": "1",
            "instance_list": [
                {
                    "pod_name": "ma-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-worker-0",
                    "server_id": "192.168.0.208",
                    "devices": [
                        {
                            "device_id": "1",
                            "device_ip": "192.2.164.169"
                        }
                    ]
                }
            ]
        }
    ]
}
[ModelArts Service Log]2024-05-07 12:37:42,474 - INFO - Rank table file (V1)
[ModelArts Service Log]2024-05-07 12:37:42,474 - INFO - 
{
    "status": "completed",
    "version": "1.0",
    "server_count": "1",
    "server_list": [
        {
            "server_id": "192.168.0.208",
            "device": [
                {
                    "device_id": "1",
                    "device_ip": "192.2.164.169",
                    "rank_id": "0"
                }
            ]
        }
    ]
}
[ModelArts Service Log]2024-05-07 12:37:42,474 - INFO - Rank table file (V1) is generated
[ModelArts Service Log]2024-05-07 12:37:42,475 - INFO - archive rank table /user/config/jobstart_hccl.json to /home/ma-user/modelarts/log/2024-05-07-12-37-32/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-template2-rank-table.json
[ModelArts Service Log]2024-05-07 12:37:42,475 - INFO - archive rank table /home/ma-user/rank_table/jobstart_hccl.json to /home/ma-user/modelarts/log/2024-05-07-12-37-32/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2-template1-rank-table.json
[ModelArts Service Log]2024-05-07 12:37:42,475 - INFO - set rank table RANK_TABLE_FILE env to /home/ma-user/rank_table/jobstart_hccl.json
[ModelArts Service Log]2024-05-07 12:37:42,475 - INFO - Current server
[ModelArts Service Log]2024-05-07 12:37:42,475 - INFO - 
{
    "server_id": "192.168.0.208",
    "device": [
        {
            "device_id": "1",
            "device_ip": "192.2.164.169",
            "rank_id": "0"
        }
    ]
}
[ModelArts Service Log]2024-05-07 12:37:42,476 - INFO - Route plan ends for env ROUTE_PLAN = false. Route plan acceleration service may not be available in this region
[ModelArts Service Log]2024-05-07 12:37:42,476 - INFO - The environment variable MA_TERMINATION_GRACE_PERIOD_SECONDS is set to 60, exponential backoff times will be set to 6
[ModelArts Service Log]2024-05-07 12:37:42,477 - INFO - bootstrap proc-rank-0-device-0
[ModelArts Service Log]2024-05-07 12:37:42,487 - INFO - proc-rank-0-device-0 (pid: 542)
Download data.
INFO:root:List OBS time cost: 0.00 seconds.
INFO:root:Copy parallel total time cost: 0.05 seconds.
[WARNING] ME(542:281473541447696,MainProcess):2024-05-07-12:37:53.574.187 [mindspore/common/_decorator.py:37] 'TensorAdd' is deprecated from version 1.1 and will be removed in a future version, use 'Add' instead.
预测的蘑菇标签为:
	Hygrocybe浅黄褐湿伞,伞菌目,蜡伞科,湿伞属,分布于香港(见于松仔园),有毒

ResNet50 prediction success!

[ModelArts Service Log]2024-05-07 12:38:49,863 - INFO - Begin destroy training processes
[ModelArts Service Log]2024-05-07 12:38:49,863 - INFO - proc-rank-0-device-0 (pid: 542) has exited before receiving the term signal
[ModelArts Service Log]2024-05-07 12:38:49,863 - INFO - End destroy training processes
time="2024-05-07T12:38:49+08:00" level=info msg="the run_train script is exiting..." Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="the run_train 359 script is exited with 0" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="command is exit with 0" file="process.go:178" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="detected pattern: map[]\n" file="process.go:197" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="device log export result is false" file="listener.go:183" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="start parse ascend log, current time is :2024-05-07 12:38:49" file="ascend_log_handler.go:220" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="ascend_fd binary found, path: /home/ma-user/modelarts/package/ascend-fd" file="executor.go:220" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="zombie process cleaner is exiting" file="cleaner_unix.go:53" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:49+08:00" level=info msg="we will look for log files in the following paths:\n1. --host_log: config is , default path is /{log_path}, file pattern: messages-during-ma-job-{job_id}-worker-{task_id}.log\n2. --train_log: config is /home/ma-user/modelarts/log/2024-05-07-12-37-32, default path is /{log_path}/{instruct_training_proc_start_time}, file pattern: modelarts-job-{job_id}-proc-rank-{rank_id}-device-{device_id}.txt\n3. --process_log: config is , default path is /{log_path}/modelarts-job-{job_id}/ascend/process_log, specified by the env ASCEND_PROCESS_LOG_PATH, file pattern: plog-{pid}_{timestamp}.log\n4. --device_log: default path is /modelarts-job-{job_id}/maos-node-agent/ascend/device-log/\n5. --env_check: default path is /{log_path}/modelarts-job-{job_id}/ascend/environment_check/\n" file="executor.go:69" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
The parse job starts. Please wait.
These job ['KNOWLEDGE_GRAPH', 'ROOT_CLUSTER', 'NET_CONGESTION', 'NODE_ANOMALY'] succeeded.
The parse job is complete.
time="2024-05-07T12:38:53+08:00" level=info msg="parse ascend logs by ascend-fd successful, outputPath is /home/ma-user/modelarts/log/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2/ascend/2024-05-07-12-37-32/fault_diag_data/worker-0" file="executor.go:74"
time="2024-05-07T12:38:53+08:00" level=info msg="parse ascend log successfully, cost time is :3.275907279s" file="ascend_log_handler.go:231" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2/ascend/2024-05-07-12-37-32/fault_diag_data/" file="upload.go:207" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service Task=parsedAscendLogUpload
time="2024-05-07T12:38:53+08:00" level=info msg="obs dir = /wolf-dl-bj4/ResNet-50/predict_log/modelarts-job-d468340e-7fcb-4c26-8e09-d2f458fd41a2/ascend/2024-05-07-12-37-32/auto_diagnose" file="upload.go:210" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service Task=parsedAscendLogUpload
time="2024-05-07T12:38:53+08:00" level=info msg="num of workers = 8" file="upload.go:215" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service Task=parsedAscendLogUpload
time="2024-05-07T12:38:53+08:00" level=info msg="MA_OUTPUT_PRELOAD_SUFFIX: ." file="preload.go:27" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service Task=parsedAscendLogUpload
time="2024-05-07T12:38:53+08:00" level=info msg="modelarts output channel preload to memarts switch is: false." file="preload.go:40" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service Task=parsedAscendLogUpload
time="2024-05-07T12:38:53+08:00" level=info msg="upload parsed ascend log successfully" file="ascend_log_handler.go:237" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: startAndWait) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event(name: UserProcessTerminatedEvent, msg: ) is being handled, len: 0" file="controller.go:72" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="NPU utils watcher is exiting without NPU startup observed" file="watch_routine.go:36" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="all task worker exited with 0, will complete training" file="handler.go:445" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="done handling event(name: UserProcessTerminatedEvent, msg: ), started listeners: [instructAllOK]" file="controller.go:86" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: instructAllOK) sync=false started" file="controller.go:115" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: instructAllOK) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event(name: InstructedAllExitEvent, msg: ) is being handled, len: 0" file="controller.go:72" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="the number of event listener is zero, registration is not required" file="controller.go:99" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="done handling event(name: InstructedAllExitEvent, msg: ), will exit with 0" file="controller.go:77" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="context is closing, shutting down the http server" file="server.go:51" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="trainingProcHang metric file watcher has exited" file="watcher.go:78" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="http server shutdown successfully" file="server.go:58" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: listenAndServe) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="hang metric write listener is exiting" file="listener.go:573" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: watchHangMetric) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="dynamic profiling config file listener is exiting" file="listener.go:640" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="event listener(name: watchDynamicProfiling) sync=false exited" file="controller.go:112" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="controller exit with 0" file="controller.go:92" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="dynamic profiling config watcher has exited" file="watcher.go:77" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="the post-training script(ma-post-end.sh) not found on env, bootfile dir, or code dir, skipping execution" file="run_train.go:1032" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="post runtime info collection started" file="run_train.go:1178" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting nvlink_status, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting nfs_metrics, reason: MA_NFS_MOUNT_VOLUMES env is not found" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting ib_stats, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting mountstats, reason: MA_NFS_MOUNT_VOLUMES env is not found" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting gpu_info, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting fabric_manager_status, reason: not a gpu job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting ib_abnormal_physical_state, reason: not an infiniband job" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="collect metrics for NPU memory diagnose started" file="collector_npu.go:78" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="collect metrics for NPU congestion diagnose started" file="collector_npu.go:35" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=warning msg="ascend-dmi executor create failed, error: ascend-dmi is not found in the /usr/local/Ascend/toolbox path, skip ascend-dmi after check step" file="ascend_check.go:140" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting node_iowait, reason: no valid prom metrics in response" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="skip collecting node_ssd_usage, reason: no valid prom metrics in response" file="collector.go:158" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=warning msg="collect core num failed, will set core num val to 0, err: empty prometheus response" file="collector_npu.go:140" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=info msg="collect metrics for NPU memory diagnose finished" file="collector_npu.go:125" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:53+08:00" level=warning msg="collect node memory usage failed, err: empty prometheus response" file="collector_npu.go:153" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:54+08:00" level=warning msg="collect iowait failed, err: empty prometheus response" file="collector_npu.go:167" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:54+08:00" level=info msg="collect metrics for NPU congestion diagnose finished" file="collector_npu.go:71" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:54+08:00" level=info msg="skip collecting ascend_log_parse_result, reason: empty results" file="collector.go:162" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:55+08:00" level=info msg="post runtime info collection finished" file="run_train.go:1194" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:55+08:00" level=info msg="report event TrainingExit success" file="event.go:95" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:55+08:00" level=info msg="bootstrap is exiting with exit code 0" file="bootstrap.go:306" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:55+08:00" level=info msg="retCode 0 has been written to the retCode file /home/ma-user/modelarts/retCode" file="bootstrap.go:286" Command=bootstrap/run Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="retcode file already exists" file="analyzer.go:284" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="analyzer is diagnosing due to exit of training container" file="analyzer.go:306" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="time required for conclude： 0 ms" file="analyzer.go:410" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="analyzer has exited" file="analyzer.go:308" Command=analyze Component=ma-training-toolkit Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="[sidecar] training is completed" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:38:56+08:00" level=info msg="[sidecar] stop toolkit_obs_upload_by_channels_pid = 60 by signal SIGTERM" Component=ShellScripts Platform=ModelArts-Service
time="2024-05-07T12:38:57+08:00" level=info msg="the final upload is in progress..." file="upload.go:232" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=train_url
time="2024-05-07T12:38:57+08:00" level=info msg="the final upload is in progress..." file="upload.go:232" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=srt_log_collection
time="2024-05-07T12:38:57+08:00" level=info msg="the final upload is in progress..." file="upload.go:232" Command=obs/upload_by_channels Component=ma-training-toolkit Platform=ModelArts-Service Task=log_url
